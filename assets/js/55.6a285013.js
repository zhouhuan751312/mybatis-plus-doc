(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{294:function(t,a,s){"use strict";s.r(a);var n=s(16),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#如何排除非表中字段？"}},[t._v("如何排除非表中字段？")])]),s("li",[s("a",{attrs:{href:"#排除实体父类属性"}},[t._v("排除实体父类属性")])]),s("li",[s("a",{attrs:{href:"#出现-invalid-bound-statement-not-found-异常"}},[t._v("出现 Invalid bound statement (not found) 异常")])]),s("li",[s("a",{attrs:{href:"#自定义-sql-无法执行"}},[t._v("自定义 SQL 无法执行")])]),s("li",[s("a",{attrs:{href:"#启动时异常"}},[t._v("启动时异常")])]),s("li",[s("a",{attrs:{href:"#关于-long-型主键填充不生效的问题"}},[t._v("关于 Long 型主键填充不生效的问题")])]),s("li",[s("a",{attrs:{href:"#id-worker-生成主键太长导致-js-精度丢失"}},[t._v("ID_WORKER 生成主键太长导致 js 精度丢失")])]),s("li",[s("a",{attrs:{href:"#插入或更新的字段有-空字符串-或者-null"}},[t._v("插入或更新的字段有 空字符串 或者 null")])]),s("li",[s("a",{attrs:{href:"#字段类型为-bit-、-tinyint-1-时映射为-boolean-类型"}},[t._v("字段类型为 bit、tinyint(1) 时映射为 boolean 类型")])]),s("li",[s("a",{attrs:{href:"#出现-2-个-limit-语句"}},[t._v("出现 2 个 limit 语句")])]),s("li",[s("a",{attrs:{href:"#insert-后如何返回主键"}},[t._v("insert 后如何返回主键")])]),s("li",[s("a",{attrs:{href:"#mp-如何查指定的几个字段"}},[t._v("MP 如何查指定的几个字段")])]),s("li",[s("a",{attrs:{href:"#mapper-层二级缓存问题"}},[t._v("mapper 层二级缓存问题")])]),s("li",[s("a",{attrs:{href:"#mapper-层二级缓存刷新问题"}},[t._v("mapper 层二级缓存刷新问题")])]),s("li",[s("a",{attrs:{href:"#cause-org-apache-ibatis-type-typeexception-error-setting-null-for-parameter-1-with-jdbctype-other"}},[t._v("Cause: org.apache.ibatis.type.TypeException:Error setting null for parameter #1 with JdbcType OTHER")])]),s("li",[s("a",{attrs:{href:"#自定义-sql-里使用-page-对象传参无法获取"}},[t._v("自定义 sql 里使用 Page 对象传参无法获取")])]),s("li",[s("a",{attrs:{href:"#如何使用-【map下划线自动转驼峰】"}},[t._v("如何使用:【Map下划线自动转驼峰】")])]),s("li",[s("a",{attrs:{href:"#在-wrapper-中如何使用-limit-限制-sql"}},[t._v("在 wrapper 中如何使用 limit 限制 SQL")])]),s("li",[s("a",{attrs:{href:"#通用-insertbatch-为什么放在-service-层处理"}},[t._v("通用 insertBatch 为什么放在 service 层处理")])]),s("li",[s("a",{attrs:{href:"#逻辑删除下-自动填充-功能没有效果"}},[t._v("逻辑删除下 自动填充 功能没有效果")])]),s("li",[s("a",{attrs:{href:"#_3-x数据库关键字如何处理？"}},[t._v("3.x数据库关键字如何处理？")])]),s("li",[s("a",{attrs:{href:"#mybatisplusexception-your-property-named-xxx-cannot-find-the-corresponding-database-column-name"}},[t._v('MybatisPlusException: Your property named "xxx" cannot find the corresponding database column name!')])]),s("li",[s("a",{attrs:{href:"#error-attempting-to-get-column-create-time-from-result-set-cause-java-sql-sqlfeaturenotsupportedexception"}},[t._v("Error attempting to get column 'create_time' from result set. Cause: java.sql.SQLFeatureNotSupportedException")])]),s("li",[s("a",{attrs:{href:"#mp版本从3-1-0及以下版本升级到高版本，jdk8日期新类型localdatetime等无法映射（报错）"}},[t._v("mp版本从3.1.0及以下版本升级到高版本，JDK8日期新类型LocalDateTime等无法映射（报错）")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"如何排除非表中字段？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何排除非表中字段？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何排除非表中字段？")]),t._v(" "),s("p",[t._v("以下三种方式选择一种即可：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("使用 "),s("code",[t._v("transient")]),t._v(" 修饰")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("transient")]),t._v(" String noColumn"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("使用 "),s("code",[t._v("static")]),t._v(" 修饰")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" String noColumn"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("使用 "),s("code",[t._v("TableField")]),t._v(" 注解")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@TableField")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exist"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token boolean"}},[t._v("false")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" String noColumn"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"排除实体父类属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排除实体父类属性","aria-hidden":"true"}},[t._v("#")]),t._v(" 排除实体父类属性")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/**\n * 忽略父类 createTime 字段映射\n */\nprivate transient String createTime;\n")])])]),s("h2",{attrs:{id:"出现-invalid-bound-statement-not-found-异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现-invalid-bound-statement-not-found-异常","aria-hidden":"true"}},[t._v("#")]),t._v(" 出现 "),s("code",[t._v("Invalid bound statement (not found)")]),t._v(" 异常")]),t._v(" "),s("blockquote",[s("p",[t._v("不要怀疑，正视自己，这个异常肯定是你插入的姿势不对……")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("检查是不是引入 jar 冲突")])]),t._v(" "),s("li",[s("p",[t._v("检查 Mapper.java 的扫描路径")]),t._v(" "),s("ul",[s("li",[t._v("方法一：在 "),s("code",[t._v("Configuration")]),t._v(" 类上使用注解 "),s("code",[t._v("MapperScan")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@MapperScan")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"com.yourpackage.*.mapper"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("YourConfigClass")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("方法二：在"),s("code",[t._v("Configuration")]),t._v("类里面，配置"),s("code",[t._v("MapperScannerConfigurer")]),t._v("（"),s("a",{attrs:{href:"https://gitee.com/baomidou/mybatisplus-spring-boot/blob/config%E6%96%B9%E5%BC%8F/src/main/java/com/baomidou/springboot/config/MybatisPlusConfig.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看示例"),s("OutboundLink")],1),t._v("）")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" MapperScannerConfigurer "),s("span",{attrs:{class:"token function"}},[t._v("mapperScannerConfigurer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    MapperScannerConfigurer scannerConfigurer "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MapperScannerConfigurer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//可以通过环境变量获取你的mapper路径,这样mapper扫描可以通过配置文件配置了")]),t._v("\n    scannerConfigurer"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setBasePackage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"com.yourpackage.*.mapper"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" scannerConfigurer"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("检查是否指定了主键？如未指定，则会导致 "),s("code",[t._v("selectById")]),t._v(" 相关 ID 无法操作，请用注解 "),s("code",[t._v("@TableId")]),t._v(" 注解表 ID 主键。当然 "),s("code",[t._v("@TableId")]),t._v(" 注解可以没有！但是你的主键必须叫 id（忽略大小写）")])]),t._v(" "),s("li",[s("p",[t._v("SqlSessionFactory不要使用原生的，请使用MybatisSqlSessionFactory")])]),t._v(" "),s("li",[s("p",[t._v("检查是否自定义了SqlInjector，是否复写了getMethodList()方法，该方法里是否注入了你需要的方法(可参考DefaultSqlInjector)")])])]),t._v(" "),s("h2",{attrs:{id:"自定义-sql-无法执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义-sql-无法执行","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义 SQL 无法执行")]),t._v(" "),s("p",[t._v("问题描述：指在 XML 中里面自定义 SQL，却无法调用。本功能同 "),s("code",[t._v("MyBatis")]),t._v(" 一样需要配置 XML 扫描路径：")]),t._v(" "),s("ul",[s("li",[t._v("Spring MVC 配置（参考"),s("a",{attrs:{href:"https://gitee.com/baomidou/mybatisplus-spring-mvc/blob/dev/src/main/resources/spring/spring-mybatis.xml",target:"_blank",rel:"noopener noreferrer"}},[t._v("mybatisplus-spring-mvc"),s("OutboundLink")],1),t._v("）")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sqlSessionFactory"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dataSource"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("typeAliasesPackage"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("xxx.entity"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mapperLocations"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classpath*:/mybatis/*/*.xml"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    ...\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("Spring Boot 配置（参考"),s("a",{attrs:{href:"https://gitee.com/baomidou/mybatisplus-spring-boot/blob/2.x/src/main/resources/application.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("mybatisplus-spring-boot"),s("OutboundLink")],1),t._v("）")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{attrs:{class:"token key atrule"}},[t._v("mybatis-plus")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{attrs:{class:"token key atrule"}},[t._v("mapper-locations")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" classpath*"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/mapper/**/*.xml\n")])])]),s("ul",[s("li",[s("p",[t._v("对于"),s("code",[t._v("IDEA")]),t._v("系列编辑器，XML 文件是不能放在 java 文件夹中的，IDEA 默认不会编译源码文件夹中的 XML 文件，可以参照以下方式解决：")]),t._v(" "),s("ul",[s("li",[t._v("将配置文件放在 resource 文件夹中")]),t._v(" "),s("li",[t._v("对于 Maven 项目，可指定 POM 文件的 resource")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("build")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("resources")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("resource")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- xml放在java目录下--\x3e")]),t._v("\n          "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("directory")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("src/main/java"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("directory")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("includes")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n              "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("include")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("**/*.xml"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("include")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("includes")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("resource")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{attrs:{class:"token comment"}},[t._v("\x3c!--指定资源的位置（xml放在resources下，可以不用指定）--\x3e")]),t._v("\n      "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("resource")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("directory")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("src/main/resources"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("directory")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("resource")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("resources")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("build")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",[t._v("注意！Maven 多模块项目的扫描路径需以 "),s("code",[t._v("classpath*:")]),t._v(" 开头 （即加载多个 jar 包下的 XML 文件）")])]),t._v(" "),s("h2",{attrs:{id:"启动时异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动时异常","aria-hidden":"true"}},[t._v("#")]),t._v(" 启动时异常")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("异常一：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class\n")])])]),s("p",[t._v("MapperScan 需要排除 com.baomidou.mybatisplus.mapper.BaseMapper 类 及其 子类（自定义公共 Mapper），比如：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" com"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baomidou"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mybatisplus"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BaseMapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("SuperMapper")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BaseMapper")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// your methods")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("异常二：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Injection of autowired\n")])])]),s("p",[t._v("原因：低版本不支持泛型注入，请升级 Spring 版本到 4+ 以上。")])]),t._v(" "),s("li",[s("p",[t._v("异常三：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java.lang.NoSuchMethodError: org.apache.ibatis.session.Configuration.getDefaultScriptingLanguageInstance() Lorg/apache/ibatis/scripting/LanguageDriver\n")])])]),s("p",[t._v("版本引入问题：3.4.1 版本里没有，3.4.2 里面才有！")])])]),t._v(" "),s("h2",{attrs:{id:"关于-long-型主键填充不生效的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于-long-型主键填充不生效的问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 关于 Long 型主键填充不生效的问题")]),t._v(" "),s("p",[t._v("检查是不是用了"),s("code",[t._v("long")]),t._v("而不是"),s("code",[t._v("Long")]),t._v("！")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",[s("code",[t._v("long")]),t._v("类型默认值为 0，而 MP 只会判断是否为 "),s("code",[t._v("null")])])]),t._v(" "),s("h2",{attrs:{id:"id-worker-生成主键太长导致-js-精度丢失"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#id-worker-生成主键太长导致-js-精度丢失","aria-hidden":"true"}},[t._v("#")]),t._v(" ID_WORKER 生成主键太长导致 js 精度丢失")]),t._v(" "),s("p",[t._v("JavaScript 无法处理 Java 的长整型 Long 导致精度丢失，具体表现为主键最后两位永远为 0，解决思路： Long 转为 String 返回")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("FastJson 处理方式")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("configureMessageConverters")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("List"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("HttpMessageConverter"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v("?")]),s("span",{attrs:{class:"token operator"}},[t._v(">>")]),t._v(" converters"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    FastJsonHttpMessageConverter fastJsonConverter "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("FastJsonHttpMessageConverter")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    FastJsonConfig fjc "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("FastJsonConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// 配置序列化策略")]),t._v("\n    fjc"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setSerializerFeatures")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SerializerFeature"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BrowserCompatible"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastJsonConverter"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setFastJsonConfig")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fjc"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    converters"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("add")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fastJsonConverter"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("JackJson 处理方式")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("方式一")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// 注解处理，这里可以配置公共 baseEntity 处理")]),t._v("\n"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@JsonSerialize")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("using"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("ToStringSerializer"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("getId")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" id"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("方式二")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// 全局配置序列化返回 JSON 处理")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("final")]),t._v(" ObjectMapper objectMapper "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ObjectMapper")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nSimpleModule simpleModule "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("SimpleModule")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsimpleModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addSerializer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Long"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ToStringSerializer"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nobjectMapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("registerModule")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("simpleModule"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("比较一般的处理方式：增加一个 "),s("code",[t._v("public String getIdStr()")]),t._v(" 方法，前台获取 "),s("code",[t._v("idStr")])])])]),t._v(" "),s("h2",{attrs:{id:"插入或更新的字段有-空字符串-或者-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插入或更新的字段有-空字符串-或者-null","aria-hidden":"true"}},[t._v("#")]),t._v(" 插入或更新的字段有 空字符串 或者 "),s("code",[t._v("null")])]),t._v(" "),s("p",[t._v("FieldStrategy 有三种策略：")]),t._v(" "),s("ul",[s("li",[t._v("IGNORED：忽略")]),t._v(" "),s("li",[t._v("NOT_NULL：非 NULL，默认策略")]),t._v(" "),s("li",[t._v("NOT_EMPTY：非空")])]),t._v(" "),s("p",[t._v("当用户有更新字段为 空字符串 或者 "),s("code",[t._v("null")]),t._v(" 的需求时，需要对 "),s("code",[t._v("FieldStrategy")]),t._v(" 策略进行调整：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("方式一：调整全局的验证策略")]),t._v(" "),s("p",[t._v("注入配置 GlobalConfiguration 属性 fieldStrategy")])]),t._v(" "),s("li",[s("p",[t._v("方式二：调整字段验证注解")]),t._v(" "),s("p",[t._v("根据具体情况，在需要更新的字段中调整验证注解，如验证非空：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@TableField")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("strategy"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("FieldStrategy"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NOT_EMPTY"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("方式三：使用 "),s("code",[t._v("UpdateWrapper")]),t._v(" (3.x)")]),t._v(" "),s("p",[t._v("使用以下方法来进行更新或插入操作：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//updateAllColumnById(entity) // 全部字段更新: 3.0已经移除")]),t._v("\nmapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("update")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("User")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"mp"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setAge")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("3")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   Wrappers"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token function"}},[t._v("lambdaUpdate")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n           "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("set")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getEmail"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" null"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("//把email设置成null")]),t._v("\n           "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("eq")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getId"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//也可以参考下面这种写法")]),t._v("\nmapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("update")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    null"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Wrappers"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token function"}},[t._v("lambdaUpdate")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("set")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getAge"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("3")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("set")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getName"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"mp"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("set")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getEmail"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" null"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("//把email设置成null")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("eq")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getId"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"字段类型为-bit、tinyint-1-时映射为-boolean-类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字段类型为-bit、tinyint-1-时映射为-boolean-类型","aria-hidden":"true"}},[t._v("#")]),t._v(" 字段类型为 "),s("code",[t._v("bit")]),t._v("、"),s("code",[t._v("tinyint(1)")]),t._v(" 时映射为 "),s("code",[t._v("boolean")]),t._v(" 类型")]),t._v(" "),s("p",[t._v("默认mysql驱动会把tinyint(1)字段映射为boolean: 0=false, 非0=true")]),t._v(" "),s("p",[t._v("MyBatis 是不会自动处理该映射，如果不想把tinyint(1)映射为boolean类型:")]),t._v(" "),s("ul",[s("li",[t._v("修改类型tinyint(1)为tinyint(2)或者int")]),t._v(" "),s("li",[t._v("需要修改请求连接添加参数 "),s("code",[t._v("tinyInt1isBit=false")]),t._v("，如下：")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("jdbc:mysql://127.0.0.1:3306/mp?tinyInt1isBit=false\n")])])]),s("h2",{attrs:{id:"出现-2-个-limit-语句"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现-2-个-limit-语句","aria-hidden":"true"}},[t._v("#")]),t._v(" 出现 2 个 "),s("code",[t._v("limit")]),t._v(" 语句")]),t._v(" "),s("p",[t._v("原因：配了 2 个分页拦截器! 检查配置文件或者代码，只留一个！")]),t._v(" "),s("h2",{attrs:{id:"insert-后如何返回主键"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insert-后如何返回主键","aria-hidden":"true"}},[t._v("#")]),t._v(" insert 后如何返回主键")]),t._v(" "),s("p",[t._v("insert 后主键会自动 set 到实体的 ID 字段，所以你只需要 getId() 就好")]),t._v(" "),s("h2",{attrs:{id:"mp-如何查指定的几个字段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mp-如何查指定的几个字段","aria-hidden":"true"}},[t._v("#")]),t._v(" MP 如何查指定的几个字段")]),t._v(" "),s("p",[t._v("EntityWrapper.sqlSelect 配置你想要查询的字段")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//2.x")]),t._v("\nEntityWrapper"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("H2User"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" ew "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("EntityWrapper")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\new"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setSqlSelect")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"test_id as id, name, age"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{attrs:{class:"token comment"}},[t._v("//只查询3个字段")]),t._v("\nList"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("H2User"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("selectList")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ew"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("H2User u"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("list"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Assert"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("assertNotNull")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getId")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Assert"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("assertNotNull")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getName")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Assert"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("assertNull")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getPrice")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// 这个字段没有查询出来")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("//3.x")]),t._v("\nmapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("selectList")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    Wrappers"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token function"}},[t._v("lambdaQuery")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("select")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getId"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" User"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v("getName"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//或者使用QueryWrapper")]),t._v("\nmapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("selectList")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("QueryWrapper")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("User"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("select")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"id"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token string"}},[t._v('"name"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"mapper-层二级缓存问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapper-层二级缓存问题","aria-hidden":"true"}},[t._v("#")]),t._v(" mapper 层二级缓存问题")]),t._v(" "),s("p",[t._v("我们建议缓存放到 service 层，你可以自定义自己的 BaseServiceImpl 重写注解父类方法，继承自己的实现。")]),t._v(" "),s("p",[t._v("当然如果你是一个极端分子，请使用 CachePaginationInterceptor 替换默认分页，这样支持分页缓存。")]),t._v(" "),s("h2",{attrs:{id:"mapper-层二级缓存刷新问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapper-层二级缓存刷新问题","aria-hidden":"true"}},[t._v("#")]),t._v(" mapper 层二级缓存刷新问题")]),t._v(" "),s("p",[t._v("如果你按照 mybatis 的方式配置第三方二级缓存，并且使用 2.0.9 以上的版本，则会发现自带的方法无法更新缓存内容，那么请按如下方式解决（二选一）：")]),t._v(" "),s("p",[t._v("1.在代码中 mybatis 的 mapper 层添加缓存注释，声明 implementation 或 eviction 的值为 cache 接口的实现类")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@CacheNamespace")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("implementation"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("MybatisRedisCache"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("eviction"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("MybatisRedisCache"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("DataResourceMapper")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BaseMapper")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("DataResource"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("2.在对应的 mapper.xml 中将原有注释修改为链接式声明，以保证 xml 文件里的缓存能够正常")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("cache-ref")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("namespace")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.mst.cms.dao.DataResourceMapper"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("cache-ref")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"cause-org-apache-ibatis-type-typeexception-error-setting-null-for-parameter-1-with-jdbctype-other"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cause-org-apache-ibatis-type-typeexception-error-setting-null-for-parameter-1-with-jdbctype-other","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("Cause: org.apache.ibatis.type.TypeException:Error setting null for parameter #1 with JdbcType OTHER")])]),t._v(" "),s("blockquote",[s("p",[t._v("配置 jdbcTypeForNull=NULL\nSpring Bean 配置方式：")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("MybatisConfiguration configuration "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MybatisConfiguration")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfiguration"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setDefaultScriptingLanguage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MybatisXMLLanguageDriver"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfiguration"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setJdbcTypeForNull")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JdbcType"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NULL"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconfiguration"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setMapUnderscoreToCamelCase")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{attrs:{class:"token comment"}},[t._v("//开启下划线转驼峰")]),t._v("\nsqlSessionFactory"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setConfiguration")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("configuration"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("yml 配置")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{attrs:{class:"token key atrule"}},[t._v("mybatis-plus")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{attrs:{class:"token key atrule"}},[t._v("configuration")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{attrs:{class:"token key atrule"}},[t._v("jdbc-type-for-null")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'null'")]),t._v(" \n")])])]),s("h2",{attrs:{id:"自定义-sql-里使用-page-对象传参无法获取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义-sql-里使用-page-对象传参无法获取","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义 sql 里使用 Page 对象传参无法获取")]),t._v(" "),s("blockquote",[s("p",[t._v('Page 对象是继承 RowBounds，是 Mybatis 内置对象，无法在 mapper 里获取\n请使用自定义 Map/对象，或者通过@Param("page") int page,size 来传参')])]),t._v(" "),s("h2",{attrs:{id:"如何使用-【map下划线自动转驼峰】"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何使用-【map下划线自动转驼峰】","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何使用:【Map下划线自动转驼峰】")]),t._v(" "),s("p",[t._v("指的是："),s("code",[t._v('resultType="java.util.Map"')])]),t._v(" "),s("ul",[s("li",[t._v("spring boot")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" ConfigurationCustomizer "),s("span",{attrs:{class:"token function"}},[t._v("configurationCustomizer")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" i "),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" i"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setObjectWrapperFactory")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MybatisMapWrapperFactory")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"在-wrapper-中如何使用-limit-限制-sql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-wrapper-中如何使用-limit-限制-sql","aria-hidden":"true"}},[t._v("#")]),t._v(" 在 wrapper 中如何使用 "),s("code",[t._v("limit")]),t._v(" 限制 SQL")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// 取 1 条数据")]),t._v("\nwrapper"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("last")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"limit 1"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"通用-insertbatch-为什么放在-service-层处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通用-insertbatch-为什么放在-service-层处理","aria-hidden":"true"}},[t._v("#")]),t._v(" 通用 insertBatch 为什么放在 service 层处理")]),t._v(" "),s("ul",[s("li",[t._v("SQL 长度有限制海量数据量单条 SQL 无法执行，就算可执行也容易引起内存泄露 JDBC 连接超时等")]),t._v(" "),s("li",[t._v("不同数据库对于单条 SQL 批量语法不一样不利于通用")]),t._v(" "),s("li",[t._v("目前的解决方案：循环预处理批量提交，虽然性能比单 SQL 慢但是可以解决以上问题。")])]),t._v(" "),s("h2",{attrs:{id:"逻辑删除下-自动填充-功能没有效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑删除下-自动填充-功能没有效果","aria-hidden":"true"}},[t._v("#")]),t._v(" 逻辑删除下 自动填充 功能没有效果")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("自动填充的实现方式是填充到入参的"),s("code",[t._v("entity")]),t._v("内,由于"),s("code",[t._v("baseMapper")]),t._v("提供的删除接口入参不是"),s("code",[t._v("entity")]),t._v("所以逻辑删除无效")])]),t._v(" "),s("li",[s("p",[t._v("如果你想要使用自动填充有效:")]),t._v(" "),s("ul",[s("li",[t._v("方式一: 使用update方法:"),s("code",[t._v('UpdateWrapper.set("logicDeleteColumn","deleteValue")')])]),t._v(" "),s("li",[t._v("方式二: 配合"),s("router-link",{attrs:{to:"/guide/sql-injector.html"}},[t._v("Sql注入器")]),s("br"),t._v("\n并使用我们提供的"),s("code",[t._v("com.baomidou.mybatisplus.extension.injector.methods.LogicDeleteByIdWithFill")]),t._v("类"),s("br"),t._v("\n注意该类只能填充指定了自动填充的字段,其他字段无效")],1)])]),t._v(" "),s("li",[s("p",[t._v("方式2下: Java Config Bean 配置")]),t._v(" "),s("ol",[s("li",[t._v("配置自定义的 SqlInjector")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" LogicSqlInjector "),s("span",{attrs:{class:"token function"}},[t._v("logicSqlInjector")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("LogicSqlInjector")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("/**\n         * 注入自定义全局方法\n         */")]),t._v("\n        "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" List"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("AbstractMethod"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("getMethodList")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            List"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("AbstractMethod"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" methodList "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("super")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getMethodList")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            methodList"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("add")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("LogicDeleteByIdWithFill")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" methodList"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("配置自己的全局 baseMapper 并使用")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MyBaseMapper")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BaseMapper")]),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("T"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("/**\n     * 自定义全局方法\n     */")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("deleteByIdWithFill")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("T entity"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_3-x数据库关键字如何处理？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-x数据库关键字如何处理？","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.x数据库关键字如何处理？")]),t._v(" "),s("p",[t._v("在以前的版本是自动识别关键字进行处理的，但是3.x移除了这个功能。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("不同的数据库对关键字的处理不同,很难维护。")])]),t._v(" "),s("li",[s("p",[t._v("在数据库设计时候本身不建议使用关键字。")])]),t._v(" "),s("li",[s("p",[t._v("交由用户去处理关键字。")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@TableField")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"`status`"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" Boolean status"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"mybatisplusexception-your-property-named-xxx-cannot-find-the-corresponding-database-column-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mybatisplusexception-your-property-named-xxx-cannot-find-the-corresponding-database-column-name","aria-hidden":"true"}},[t._v("#")]),t._v(' MybatisPlusException: Your property named "xxx" cannot find the corresponding database column name!')]),t._v(" "),s("p",[t._v("针对3.1.1以及后面的版本：")]),t._v(" "),s("p",[t._v("现象： 单元测试没问题，启动服务器进行调试就出现这个问题")]),t._v(" "),s("p",[t._v("原因： dev-tools, 3.1.1+针对字段缓存，使用.class来作为key替换了原来的className, 而使用dev-tools会把.class使用不同的classLoader加载，导致可能出现找不到的情况")]),t._v(" "),s("p",[t._v("解决方案： 去掉dev-tools插件")]),t._v(" "),s("h2",{attrs:{id:"error-attempting-to-get-column-create-time-from-result-set-cause-java-sql-sqlfeaturenotsupportedexception"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error-attempting-to-get-column-create-time-from-result-set-cause-java-sql-sqlfeaturenotsupportedexception","aria-hidden":"true"}},[t._v("#")]),t._v(" Error attempting to get column 'create_time' from result set. Cause: java.sql.SQLFeatureNotSupportedException")]),t._v(" "),s("p",[t._v("3.1.0之前版本没问题，针对3.1.1以及后续版本出现上述问题")]),t._v(" "),s("p",[t._v("现象： 集成druid数据源，使用3.1.0之前版本没问题，升级mp到3.1.1+后，运行时报错:java.sql.SQLFeatureNotSupportedException")]),t._v(" "),s("p",[t._v("原因： mp3.1.1+使用了新版jdbc，LocalDateTime等新日期类型处理方式升级，但druid不支持，"),s("a",{attrs:{href:"https://github.com/baomidou/mybatis-plus/issues/1245",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考issue"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("解决方案： 1. 坐等druid升级解决这个问题；2.保持mp版本3.1.0；3.紧跟mp版本，换掉druid数据源")]),t._v(" "),s("h2",{attrs:{id:"mp版本从3-1-0及以下版本升级到高版本，jdk8日期新类型localdatetime等无法映射（报错）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mp版本从3-1-0及以下版本升级到高版本，jdk8日期新类型localdatetime等无法映射（报错）","aria-hidden":"true"}},[t._v("#")]),t._v(" mp版本从3.1.0及以下版本升级到高版本，JDK8日期新类型LocalDateTime等无法映射（报错）")]),t._v(" "),s("p",[t._v("MP_3.1.0及之前的版本，依赖的是mybatis 3.5.0,")]),t._v(" "),s("p",[t._v("MP_3.1.1升级了mybatis的依赖到3.5.1， 而mybatis 3.5.1 对于新日期类型，需要JDBC driver支持JDBC 4.2 API.")]),t._v(" "),s("p",[t._v("如果你的jdbc驱动版本不支持，那么就会出现新日期类型报错。")]),t._v(" "),s("p",[t._v("参考 blog.mybatis.org")]),t._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("There is one backward incompatible changes since 3.5.0.\n    Because of the fix for #1478 , LocalDateTypeHandler, LocalTimeTypeHandler and LocalDateTimeTypeHandler now require a JDBC driver that supports JDBC 4.2 API.\n    [EDIT] These type handlers no longer work with Druid. Please see #1516 .\n")])])])])},[],!1,null,null,null);e.options.__file="faq.md";a.default=e.exports}}]);